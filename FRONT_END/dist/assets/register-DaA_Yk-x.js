import{r as m,j as e,L as w}from"./index-B0oUuGW6.js";import{a as j,v,b as p,c as y,d as f,f as E,B as h,e as F}from"./react-toastify.esm-7kerWm_A.js";const A="/assets/unfillBox-DYUAZUxJ.png",O=async s=>{try{console.log("Enviando dados para registro:",s);const r=await fetch("https://bankinapi20240623181422.azurewebsites.net/CadUsuario/adicionaNovoUsuario",{method:"POST",body:JSON.stringify({iD_USUARIO:0,nome:s.firstName,sobrE_NOME:s.lastName,senha:s.password,email:s.email,saldo:0,token:"",cpf:s.cpf}),headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok){const l=await r.json();throw console.error("Erro na resposta do servidor:",l),new Error(`HTTP error! Status: ${r.status}, Errors: ${JSON.stringify(l.errors)}`)}const t=await r.json();return console.log("Dados enviados com sucesso!",t),t}catch(r){throw console.error("Erro ao tentar registrar usuário:",r),r}},U=()=>{const[s,r]=m.useState({firstName:"",lastName:"",cpf:"",email:"",password:"",confirmPassword:"",cep:"",street:"",city:""}),[t,l]=m.useState({firstName:"",lastName:"",cpf:"",email:"",password:"",confirmPassword:"",cep:"",street:"",city:""}),[c,d]=m.useState(!1);return{formData:s,errors:t,formComplete:c,handleInputChange:o=>{const{name:a,value:n,type:b,checked:C}=o.target,P=b==="checkbox"?C:n;r(S=>{const N={...S,[a]:P},i={...t};return a==="email"?i.email=j(n):a==="cpf"?i.cpf=v(n):a==="firstName"?i.firstName=p(n):a==="lastName"?i.lastName=p(n):a==="password"?(i.password=y(n),i.confirmPassword=f(n,N.confirmPassword)):a==="confirmPassword"?i.confirmPassword=f(s.password,n):a==="cep"&&n.length===8&&E(n).then(u=>{u&&r(k=>({...k,street:u.street,city:u.city}))}),l(i),N})},handleSubmit:async o=>{if(o.preventDefault(),Object.values(t).every(a=>a==="")){d(!0);try{const a=await I(s.password);await O({...s,password:a}),h.success("Cadastro realizado com sucesso!")}catch(a){h.error("Erro ao cadastrar usuário. Por favor, verifique seus dados e tente novamente."),console.error("Erro ao cadastrar usuário:",a)}}else h.error("Por favor, corrija os erros no formulário antes de continuar.")}}};async function I(s){const r=new TextEncoder().encode(s),t=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(t)).map(d=>d.toString(16).padStart(2,"0")).join("")}const B=()=>{const{formData:s,errors:r,handleInputChange:t,handleSubmit:l}=U(),[c,d]=m.useState(!1),x=()=>{var a;g()?(d(!c),(a=document.getElementById("secondForm"))==null||a.scrollIntoView({behavior:"smooth"})):alert("Por favor, preencha todos os campos corretamente antes de continuar.")},g=()=>{const o={};return o.firstName=p(s.firstName),o.lastName=p(s.lastName),o.cpf=v(s.cpf),o.email=j(s.email),o.password=y(s.password),o.confirmPassword=f(s.password,s.confirmPassword),Object.values(o).every(a=>a==="")};return e.jsxs("div",{className:"bg-[#171717] h-screen w-screen flex justify-center items-center flex-col font-inter",children:[e.jsx("img",{src:A,alt:"Descrição da imagem",className:"w-[80%] md:w-[15%]"}),e.jsx("div",{className:"p-6 w-80 text-light-300 flex flex-col justify-center items-center",children:e.jsxs("form",{onSubmit:l,children:[!c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"py-3",children:e.jsxs("div",{className:"uk-inline",children:[e.jsx("input",{placeholder:"Nome",type:"text",id:"firstName",name:"firstName",value:s.firstName,onChange:t,required:!0,className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300"}),r.firstName&&e.jsx("p",{className:"text-red-500",children:r.firstName})]})}),e.jsx("div",{className:"py-3",children:e.jsxs("div",{className:"uk-inline",children:[e.jsx("input",{placeholder:"Sobrenome",type:"text",id:"lastName",name:"lastName",value:s.lastName,onChange:t,required:!0,className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300"}),r.lastName&&e.jsx("p",{className:"text-red-500",children:r.lastName})]})}),e.jsxs("div",{className:"py-3",children:[e.jsx("input",{placeholder:"CPF:",type:"text",id:"cpf",name:"cpf",className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300",value:F(s.cpf),onChange:t,required:!0}),r.cpf&&e.jsx("p",{className:"text-red-500",children:r.cpf})]}),e.jsxs("div",{className:"py-3",children:[e.jsx("input",{className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300",placeholder:"E-mail:",type:"email",id:"email",name:"email",value:s.email,onChange:t,required:!0}),r.email&&e.jsx("p",{className:"text-red-500",children:r.email})]}),e.jsxs("div",{className:"py-3",children:[e.jsx("input",{className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300",placeholder:"Nova senha:",type:"password",id:"password",name:"password",value:s.password,onChange:t,required:!0}),r.password&&e.jsx("p",{className:"text-red-500",children:r.password})]}),e.jsxs("div",{className:"py-3",children:[e.jsx("input",{placeholder:"Confirme a senha:",type:"password",id:"confirmPassword",name:"confirmPassword",className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300",value:s.confirmPassword,onChange:t,required:!0}),r.confirmPassword&&e.jsx("p",{className:"text-red-500",children:r.confirmPassword})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center pt-5",children:[e.jsx("button",{className:"text-black font-semibold font-inter text-lg w-64 bg-light-200 rounded p-2",type:"button",onClick:x,children:"CONTINUAR"}),e.jsxs("h3",{className:"pt-3 text-text-light",children:["Já é cadastrado? ",e.jsx(w,{to:"/login",className:"text-orange-500",children:"Faça login"})]})]})]}),c&&e.jsxs("div",{className:"teste",id:"secondForm",children:[e.jsxs("div",{className:"py-3",children:[e.jsx("input",{className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300",placeholder:"CEP",type:"text",id:"cep",name:"cep",value:s.cep,onChange:t,maxLength:8}),r.cep&&e.jsx("p",{className:"text-red-500",children:r.cep})]}),e.jsx("div",{className:"py-3",children:e.jsx("input",{className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300",placeholder:"Rua",type:"text",id:"street",name:"street",value:s.street,onChange:t})}),e.jsx("div",{className:"py-3",children:e.jsx("input",{className:"uk-input border-light-500 rounded w-64 focus:border-orange-400 text-light-300",placeholder:"Cidade",type:"text",id:"city",name:"city",value:s.city,onChange:t})}),e.jsxs("div",{className:"flex flex-col justify-center items-center pt-5",children:[e.jsx("button",{className:"text-black font-semibold font-inter text-lg w-64 bg-light-200 rounded p-2",type:"submit",children:"CRIAR CONTA"}),e.jsxs("h3",{className:"pt-3 text-light-200",children:["Já é cadastrado? ",e.jsx(w,{to:"/login",className:"text-orange-500",children:"Faça login"})]})]})]})]})})]})};export{B as default};
